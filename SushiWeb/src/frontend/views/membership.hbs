<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membership</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../public/membership.css">
</head>

<body>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const searchButton = document.querySelector(".frm-btn input[type='submit']");
            const errorContainer = document.getElementById("error-message");

            // Check if there's an error message passed from the server
            const urlParams = new URLSearchParams(window.location.search);
            const errorMessage = urlParams.get("error");
            if (errorMessage) {
                errorContainer.textContent = errorMessage;
                errorContainer.style.display = "block";
            }

            searchButton.addEventListener("click", (event) => {
                event.preventDefault();
                const customerIdInput = document.querySelector("input[placeholder='Customer ID']").value.trim();
                if (customerIdInput) {
                    window.location.href = `/membership/search?MAKHACHHANG=${encodeURIComponent(customerIdInput)}`;
                } else {
                    alert("Please enter a valid Customer ID.");
                }
            });
        });
    </script>

    <div class="membership_container">
        <div class="wrap">
            <!-- Header -->
            <div class="head-title">
                <h1>Membership</h1>
                <div class="head-title-zone">
                    <ul class="title">
                        <li><a href="#">Policy</a></li>
                        <li class="active"><a href="#">Inquiry</a></li>
                    </ul>
                </div>
            </div>

            <!-- Display User MAKH -->
            <div class="user-info">
                <h2>Welcome, {{username}}
                </h2>
                <p>Your Customer ID: <strong>
                        {{MAKH}}
                    </strong></p>
            </div>

            <!-- Error Message -->
            <div id="error-message" style="display: none; color: red; margin-bottom: 1rem;"></div>

            <!-- Form -->
            <div class="container">
                <div class="wrap-form">
                    <div class="form-group">
                        <span class="material-icons">group</span>
                        <input type="text" placeholder="Customer ID">
                    </div>
                    <div class="form-group">
                        <span class="material-icons">credit_card</span>
                        <input type="text" placeholder="Phone Number">
                    </div>
                    <div class="frm-btnwrap">
                        <div class="frm-btn">
                            <input type="submit" value="Search">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>